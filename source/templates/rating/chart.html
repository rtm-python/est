{%- extends "rating/base.html" -%}
{% set endpoint = 'rating.get_chart' -%}
{%- block ratings_content -%}
	<div class="card w-100 my-3">
		<div class="d-none d-md-inline-block p-3">
			<canvas id="chart-landscape" style="display: block; width: 600px; height: 300px;" width="600" height="300" class="chartjs-render-monitor"></canvas>
		</div>
		<div class="d-inline-block d-md-none p-3">
			<canvas id="chart-portrait" style="display: block; width: 600px; height: 600px;" width="600" height="600" class="chartjs-render-monitor"></canvas>
		</div>
	</div>
	<script>
		new Chart("chart-landscape", {
			type: "line",
			data: {
				labels: {{ days|tojson|safe }},
				datasets: [
					{%- for name_value, name_data in data.items() -%}
						{{ { 'data': name_data['value'], 'label': name_value, 'fill': 'start', 'backgroundColor': name_data['bg-color'], 'borderColor': name_data['fg-color'] }|tojson|safe }}
						{% if not loop.last %},{%- endif -%}
					{%- endfor -%}
				]
			},
			options: {
				elements: {
					line: {
						tension: 0.25,
						borderWidth: 2
					},
					point: {
						radius: 2.1
					}
				},
				legend: {
					position: 'top'
				}
			}
		});
		new Chart("chart-portrait", {
			type: "line",
			data: {
				labels: {{ days|tojson|safe }},
				datasets: [
					{%- for name_value, name_data in data.items() -%}
						{{ { 'data': name_data['value'], 'label': name_value, 'fill': 'start', 'backgroundColor': name_data['bg-color'], 'borderColor': name_data['fg-color'] }|tojson|safe }}
						{% if not loop.last %},{%- endif -%}
					{%- endfor -%}
				]
			},
			options: {
				elements: {
					line: {
						tension: 0.25,
						borderWidth: 1
					},
					point: {
						radius: 1.1
					}
				},
				legend: {
					position: 'top'
				}
			}
		});
	</script>
{%- endblock ratings_content -%}
{%- block script -%}
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"></script>
{%- endblock -%}
