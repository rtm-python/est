{%- extends "layout.html" -%}
{% set title -%}{{ __('Catalog') }}{%- endset %}
{%- block body_content -%}
	<h2 class="mt-3">{{ __('Catalog') }}</h2>
	{%- include 'examination/filter.html' -%}
	<div class="list-group list-group-flush">
	{%- for item in examinations -%}
		<a href="{{ url_for('examination.get_examination', uid=item.uid) }}" class="list-group-item list-group-item-action">
			<div class="mt-2 d-flex w-100 justify-content-between">
				<h4 class="mb-2">{{ item.name }}</h4>
				<small>{{ item.plugin }}</small>
			</div>
			<small>{{ item.options }}</small>
			<p class="lb-1">{{ item.description }}</p>
			<div class="progress" style="height: 3px;">
				<div class="progress-bar" role="progressbar" style="width: {{ item.score }}%" area-valuenow="{{ item.score }}" area-valuemin="0" area-valuemax="100"></div>
			</div>
			<small class="mt-2 timestamp d-flex justify-content-end">{{ item.passed }}</small>
		</a>
	{%- endfor -%}
	</div>
	<small class="mt-2 d-flex justify-content-start">{{ caption }}</small>
	{%- include 'paginator.html' -%}
{%- endblock -%}
{%- block body_script -%}
	<script type="text/javascript">
		var elements = $(".timestamp");
		var user_tz = moment.tz.guess();

		for (var i = 0; i < elements.length; i++) {
			elements[i].textContent = moment(elements[i].textContent + "+00:00").tz(user_tz).format('HH:mm:ss DD MMMM YYYY, dddd');
		}
	</script>
{%- endblock -%}

